
--1 Create Citizen Table :
CREATE TABLE Citizen (
    citizen_id number(10) CONSTRAINT CI_ID_PK PRIMARY KEY,
    passportNumber number(10) NOT NULL UNIQUE,
    firstName varchar2(50),
    lastName varchar2(50),
    phoneNumber number(10),
    emailAddress varchar2(50),
    address varchar2(50)
);
--2 Create NonCitizen Table :
CREATE TABLE nonCitizen (
    noncitizen_id number(10) CONSTRAINT NO_CI_ID_PK PRIMARY KEY,
    nationality varchar2(50) NOT NULL,
    passportNumber number(10),
    firstName varchar2(50),
    lastName varchar2(50),
    phoneNumber number(10),
    emailAddress varchar2(50),
    address varchar2(50)
);
--3 Create Employee Table :
CREATE TABLE Employee (
    employee_id number(10) CONSTRAINT EM_LO_ID_PK PRIMARY KEY,
    employeeName varchar2(50) NOT NULL,
    EmployeeTitle varchar2(50)
);
--4 Create Service Table :
CREATE TABLE Service (
    Service_ID number(10) CONSTRAINT SE_VR_ID_PK PRIMARY KEY,
    Service_Type_v varchar2(50) NOT NULL,
    Citizen_id number(10) NULL,
    nonCitizen_id number(10) NULL,
    Employeee_id number(10) NOT NULL,
    Revenue_id number(10) NOT NULL,
    --add the CitizenId as a foregnKey
    CONSTRAINT FKService582807 FOREIGN KEY (Citizen_id) REFERENCES Citizen (citizen_id),
    --add the nonCitizenId as a foregnKey
    CONSTRAINT FKService582897 FOREIGN KEY (nonCitizen_id) REFERENCES nonCitizen (noncitizen_id),
    --add the CitizenId as a foregnKey
    CONSTRAINT FKService152063 FOREIGN KEY (Employeee_id) REFERENCES Employee (employee_id),
    --add the RevenueId as a foregnKey
    CONSTRAINT FKService11322063 FOREIGN KEY (Revenue_id) REFERENCES Revenue (revenue_id)
);
--5 Create Passport Table :
CREATE TABLE passportS (
    PassoprtNumber number(10) NOT NULL UNIQUE,
    Passport_Issue_date number(10) NOT NULL,
    Passport_Expiry_date number(10) NOT NULL,
    pStatus varchar2(50) NOT NULL,
    Service_ID number(10) NOT NULL,
    CONSTRAINT FKService152083 FOREIGN KEY (Service_ID) REFERENCES Service (Service_ID)
);
--6 Create Visa Table :
CREATE TABLE Visa (
    VisaNumber number(10) NOT NULL UNIQUE,
    vStatus varchar2(50) NOT NULL,
    Passport_Issue_date number(10) NOT NULL,
    Passport_Expiry_date number(10) NOT NULL,
    Service_ID number(10) NOT NULL,
    CONSTRAINT FKService15203 FOREIGN KEY (Service_ID) REFERENCES Service (Service_ID)
);
--7 Create Revenue Table :
CREATE TABLE Revenue (
    revenue_id number(10) CONSTRAINT RE_VE_ID_PK PRIMARY KEY,
    amount number(10) NOT NULL,
    description varchar2(50)
);

--1 INSERT INTO CITIZEN BY SELECTING COLUMNS:
INSERT INTO CITIZEN (CITIZEN_ID, PASSPORTNUMBER, FIRSTNAME, LASTNAME, PHONENUMBER, EMAILADDRESS, ADDRESS)
VALUES (101,0989,'MUATH','NASR',01839080,'BALLACK@','DECENTRUM');

--2 INSERT INTO CITIZEN DEFAULT TO INSERT TO ALL COLUNMS :
INSERT INTO CITIZEN VALUES (102,0988,'BAHAA','HATIM',11271436,'BAHAA.BK@GMAIL.COM','UNIPARK');

--3 INSERT USING MULTI VALUE TO MULTI COLUMNS
INSERT INTO CITIZEN (CITIZEN_ID, PASSPORTNUMBER, FIRSTNAME, LASTNAME, PHONENUMBER, EMAILADDRESS, ADDRESS) 
VALUES (103,0990,'IBRAHEEM','ALJARBU',6509087124,'IBRAHEEM@GMAIL.COM','HEIRTAGE')
INSERT INTO CITIZEN VALUES (104,0987,'ABDULMALIK ','ANWAR',061471979,'ABDULMALIK@GMAIL.COM','DECENTRUM')
INSERT INTO CITIZEN VALUES (105,0956,'ABDULAZIZ ','AHMED',06116218,'ABDULMALIK@GMAIL.COM','DECENTRUM')
SELECT * FROM dual;

--1 INSERT INTO NONCITIZEN BY SELECTING COLUMNS:
INSERT INTO NONCITIZEN (NONCITIZEN_ID,NATIONALITY, PASSPORTNUMBER, FIRSTNAME, LASTNAME, PHONENUMBER, EMAILADDRESS, ADDRESS)
VALUES (201,'Yemen',0345,'MOHAMMED','ALI',777840114,'STAREVIL@gamil.COM','SANAA');

--2 INSERT INTO NONCITIZEN DEFAULT TO INSERT TO ALL COLUNMS :
INSERT INTO NONCITIZEN VALUES (202,'JORDEN',0324,'HAMZAH','KISSWANI',873245234,'HAMZAH@KISSWANI','AMMAN');

--3 INSERT USING MULTI VALUE TO MULTY COLUMNS 
INSERT INTO NONCITIZEN VALUES (203,'KSA',033,'ALI','NASSR',966245234,'ALI@GAMIL','JADDAH')
INSERT INTO NONCITIZEN VALUES (204,'KSA',034,'SARAH','AHMED',9662445434,'SARAH@GAMIL','MACCA') 
INSERT INTO NONCITIZEN VALUES (205,'KSA',035,'SAM','SAMEER',967894,'SAM@GAMIL','JADDAH')
SELECT * FROM dual;

--1 INSERT INTO EMPLOYEE BY SELECTING COLUMNS:
INSERT INTO EMPLOYEE (EMPLOYEE_ID,EMPLOYEENAME, EMPLOYEETITLE) VALUES (10,'ANGELITOO','CFO');

--2 INSERT INTO EMPLOYEE DEFAULT TO INSERT TO ALL COLUNMS :
INSERT INTO EMPLOYEE VALUES (20,'LOCO','CEO');

--3 INSERT USING MULTI VALUE TO MULTY COLUMNS
INSERT INTO EMPLOYEE VALUES (30,'RONALDO','MANAGER') 
INSERT INTO EMPLOYEE VALUES (40,'M.SALAH','CAPTIN') 
INSERT INTO EMPLOYEE VALUES (50,'RAMOS','LREADER')
SELECT * FROM dual;

--1 INSERT INTO REVENUE BY SELECTING COLUMNS:
INSERT INTO REVENUE (REVENUE_ID,AMOUNT,DESCRIPTION) VALUES (061,100,'PASSPORT_FEES');

--2 INSERT INTO REVENUE DEFAULT TO INSERT TO ALL COLUNMS :
INSERT INTO REVENUE VALUES (062,100,'PASSPORT_FEES');

--3 INSERT USING MULTI VALUE TO MULTY COLUMNS
INSERT INTO REVENUE VALUES (063,200,'VISA_FEES') 
INSERT INTO REVENUE VALUES (064,100,'PASSPORT_FEES') 
INSERT INTO REVENUE VALUES (065,200,'VISA_FEES')
SELECT * FROM dual;

--1 INSERT INTO SERVICE BY SELECTING COLUMNS:
INSERT INTO SERVICE (SERVICE_ID,SERVICE_TYPE_V, CITIZEN_ID,EMPLOYEEE_ID,REVENUE_ID) VALUES (80,'PASSPORT',101,10,61);

--3 INSERT USING MULTI VALUE TO MULTY COLUMNS 
INSERT INTO SERVICE (SERVICE_ID,SERVICE_TYPE_V, CITIZEN_ID,EMPLOYEEE_ID,REVENUE_ID) VALUES (81,'PASSPORT',102,20,62) 
INSERT INTO SERVICE (SERVICE_ID,SERVICE_TYPE_V, CITIZEN_ID,EMPLOYEEE_ID,REVENUE_ID) VALUES (82,'PASSPORT',103,40,64) 
INSERT INTO SERVICE (SERVICE_ID,SERVICE_TYPE_V, CITIZEN_ID,EMPLOYEEE_ID,REVENUE_ID) VALUES (83,'PASSPORT',104,50,61) 
INSERT INTO SERVICE (SERVICE_ID,SERVICE_TYPE_V, CITIZEN_ID,EMPLOYEEE_ID,REVENUE_ID) VALUES (84,'PASSPORT',105,10,64)
-- INSERT NONCITIZEN VISA
INSERT INTO SERVICE (SERVICE_ID,SERVICE_TYPE_V, NONCITIZEN_ID,EMPLOYEEE_ID,REVENUE_ID) VALUES (85,'VISA',201,30,63) 
INSERT INTO SERVICE  (SERVICE_ID,SERVICE_TYPE_V, NONCITIZEN_ID,EMPLOYEEE_ID,REVENUE_ID) VALUES (86,'VISA',202,40,65) 
INSERT INTO SERVICE  (SERVICE_ID,SERVICE_TYPE_V, NONCITIZEN_ID,EMPLOYEEE_ID,REVENUE_ID) VALUES (87,'VISA',203,10,65) 
INSERT INTO SERVICE  (SERVICE_ID,SERVICE_TYPE_V, NONCITIZEN_ID,EMPLOYEEE_ID,REVENUE_ID) VALUES (88,'VISA',204,20,63)
SELECT * FROM dual;

--1 INSERT INTO PASSPORT AND VISA BY SELECTING COLUMNS:
INSERT INTO VISA (VISANUMBER,VSTATUS, SERVICE_ID,VISA_ISSUE_DATE,VISA_EXPIRY_DATE)
VALUES (701,'VALID',85,TO_DATE('12/01/2016', 'DD/MM/YYYY'),TO_DATE('12/01/2022', 'DD/MM/YYYY'));

INSERT INTO PASSPORTS (PSTATUS,SERVICE_ID,PASSPORT_ISSUE_DATE,PASSPORT_EXPIRY_DATE)
VALUES ('expired',81,TO_DATE('12/01/2017', 'DD/MM/YYYY'),TO_DATE('12/01/2021', 'DD/MM/YYYY'));

--3 INSERT USING MULTI VALUE TO MULTY COLUMNS
INSERT INTO VISA VALUES (702,'VALID',86,TO_DATE('12/01/2017', 'DD/MM/YYYY'),TO_DATE('12/01/2029', 'DD/MM/YYYY'))
INSERT INTO VISA VALUES (703,'NOT_VALID',87,TO_DATE('12/01/2017', 'DD/MM/YYYY'),TO_DATE('12/01/2022', 'DD/MM/YYYY')) 
INSERT INTO VISA VALUES (704,'VALID',88,TO_DATE('12/01/2017', 'DD/MM/YYYY'),TO_DATE('12/01/2022', 'DD/MM/YYYY'))
INSERT INTO VISA VALUES (705,'NOT_VALID',89,TO_DATE('12/01/2017', 'DD/MM/YYYY'),TO_DATE('12/01/2022', 'DD/MM/YYYY')) 
-- INSERT PASSPOERT
INSERT INTO PASSPORTS VALUES ('expired',82,TO_DATE('12/01/2019', 'DD/MM/YYYY'),TO_DATE('12/01/2020', 'DD/MM/YYYY')) 
INSERT INTO PASSPORTS VALUES ('VALID',83,TO_DATE('12/01/2014', 'DD/MM/YYYY'),TO_DATE('12/01/2024', 'DD/MM/YYYY'))
INSERT INTO PASSPORTS VALUES ('VALID',84,TO_DATE('12/01/2018', 'DD/MM/YYYY'),TO_DATE('12/01/2023', 'DD/MM/YYYY')) 
INSERT INTO PASSPORTS VALUES ('expired',80,TO_DATE('12/01/2010', 'DD/MM/YYYY'),TO_DATE('12/01/2020', 'DD/MM/YYYY'))
SELECT * FROM dual;


-- this will display only the information form service ant citizen only on both tables 
select * from citizen INNER JOIN service
ON citizen.CITIZEN_ID = service.CITIZEN_ID ;

-- This will check the record for citizen who have citizen_id = 101 on three tables using join 
SELECT *
FROM CITIZEN C
INNER JOIN SERVICE S
ON C.citizen_id = S.citizen_id
INNER JOIN PASSPORTS V ON V.SERVICE_ID = S.SERVICE_ID
WHERE C.citizen_id = 101;

--  this will info about the noncitizen using multiple row subqueries with > IN <
SELECT NONCITIZEN_ID,FIRSTNAME , lastName ,NATIONALITY ,ADDRESS
FROM NONCITIZEN WHERE NONCITIZEN_ID IN (SELECT MIN(NONCITIZEN_ID) FROM service group by service_id)

--  this will info about the Citizen who have service type passport using multiple row subqueries with > any <
SELECT CITIZEN_ID,FIRSTNAME , lastName ,ADDRESS
FROM CITIZEN WHERE CITIZEN_ID = any (SELECT CITIZEN_ID FROM service WHERE SERVICE_TYPE_V = 'PASSPORT')

-- this will RETRIVE all records about the citizen who have REVENUE_ID greater than 60 to identify the citizen how only have passport service
SELECT *
FROM CITIZEN C
INNER JOIN SERVICE S
ON C.citizen_id = S.citizen_id
RIGHT JOIN EMPLOYEE EM
ON EM.EMPLOYEE_ID = S.EMPLOYEEE_ID
LEFT JOIN REVENUE RV
ON RV.REVENUE_ID = S.REVENUE_ID
JOIN PASSPORTS PS
ON PS.SERVICE_ID = S.SERVICE_ID WHERE RV.REVENUE_ID >60;



